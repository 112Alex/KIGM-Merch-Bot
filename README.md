# Бот КИГМ Мерч

Телеграм-бот для учета и управления мерч-продукцией колледжа. Бот позволяет студентам накапливать баллы за участие в мероприятиях и использовать их для покупки мерча.

## Функциональность

### Для пользователей
- Регистрация в системе
- Просмотр доступных мероприятий
- Подача заявок на участие в мероприятиях
- Просмотр накопленных баллов
- Покупка мерч-продукции колледжа за накопленные баллы

### Для администраторов
- Добавление, изменение и удаление мероприятий
- Проверка и оценка заявок студентов
- Начисление баллов за участие в мероприятиях
- Просмотр списка всех купленных товаров
- Выгрузка данных о купленных товарах в Excel

## Технологии
- Python 3
- aiogram 3.x
- SQLAlchemy (ORM)
- База данных SQLite
- Python-dotenv для конфигурации (должен содержать константы {BOT_TOKEN} с токеном бота
    и {KIGM_MERCH_DB} для подключения к базе данных)

## Архитектура проекта

```
├── main.py                     # Главный файл запуска бота
├── requirements.txt            # Зависимости проекта
├── database/                   # Работа с базой данных
│   ├── engine.py               # Инициализация БД
│   ├── models.py               # Модели данных
│   └── orm_query.py            # Функции для работы с БД
├── handlers/                   # Обработчики команд и сообщений
│   ├── admin_private.py        # Обработчики для администраторов
│   ├── user_private.py         # Обработчики для пользователей
│   └── user_group.py           # Обработчики для групповых чатов
├── middlewares/                # Middlewares
│   └── db.py                   # Middleware для работы с БД
├── keybds/                     # Клавиатуры
│   ├── inline.py               # Inline-клавиатуры
│   └── reply.py                # Reply-клавиатуры
├── common/                     # Общие модули
│   ├── bot_cmds_list.py        # Список команд бота
│   └── variables.py            # Общие переменные
└── filters/                    # Фильтры для обработчиков
    └── chat_types.py           # Фильтр по типу чата и админам
```

## Запуск проекта

1. Клонировать репозиторий
2. Создать виртуальное окружение:
   ```bash
   python -m venv .venv
   .venv\Scripts\activate
   ```
3. Установить зависимости:
   ```bash
   pip install -r requirements.txt
   ```
4. Создать файл .env со следующим содержимым:
   ```
   BOT_TOKEN=ваш_токен_от_BotFather
   ADMIN_IDS=список_id_администраторов_через_запятую
   ```
5. Запустить бота:
   ```bash
   python main.py
   ```

## Основные команды бота

### Для пользователей
- /start - Начать работу с ботом / Зарегистрироваться
- /menu - Показать главное меню

### Для администраторов
- /admin_menu - Вызвать административное меню 